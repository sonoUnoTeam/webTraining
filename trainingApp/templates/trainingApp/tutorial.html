{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block content %}
<div class="tutorial-page">
    <div class="container-fluid px-0">
        
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-icon">
                        <i class="bi bi-lightbulb"></i>
                    </div>
                    <h1 class="hero-title">{% trans 'Guía de sonoTrainings' %}</h1>
                    <p class="hero-subtitle">{% trans 'Aprende a usar la plataforma en 5 minutos' %}</p>
                </div>
            </div>
        </section>

        <!-- Quick Navigation -->
        <section class="quick-nav">
            <div class="container">
                <div class="nav-pills-wrapper">
                    <button class="nav-pill active" data-section="overview">
                        <i class="bi bi-compass"></i>
                        <span>{% trans 'Visión General' %}</span>
                    </button>
                    <button class="nav-pill" data-section="how-it-works">
                        <i class="bi bi-gear"></i>
                        <span>{% trans 'Cómo Funciona' %}</span>
                    </button>
                    <button class="nav-pill" data-section="function-examples">
                        <i class="bi bi-graph-up"></i>
                        <span>{% trans 'Ejemplos de Funciones' %}</span>
                    </button>
                    <button class="nav-pill" data-section="question-types">
                        <i class="bi bi-question-circle"></i>
                        <span>{% trans 'Tipos de Preguntas' %}</span>
                    </button>
                    <button class="nav-pill" data-section="tips">
                        <i class="bi bi-star"></i>
                        <span>{% trans 'Consejos' %}</span>
                    </button>
                </div>
            </div>
        </section>

        <div class="container content-container">

            <!-- Section 1: Overview -->
            <section id="overview" class="content-section active">
                <div class="section-header">
                    <h2>{% trans 'Visión General' %}</h2>
                    <p class="text-muted">{% trans 'Entiende la estructura de la plataforma' %}</p>
                </div>

                <div class="info-grid">
                    <div class="info-card expandable">
                        <div class="info-card-header" data-toggle="collapse" data-target="#course-info">
                            <div class="info-icon bg-gradient-blue">
                                <i class="bi bi-collection"></i>
                            </div>
                            <div class="info-content">
                                <h3>{% trans 'Curso' %}</h3>
                                <p>{% trans 'Colección estructurada de entrenamientos' %}</p>
                            </div>
                            <i class="bi bi-chevron-down expand-icon"></i>
                        </div>
                        <div class="info-card-body collapse" id="course-info">
                            <ul class="feature-list">
                                <li>
                                    <i class="bi bi-arrow-right-circle"></i>
                                    <span>{% trans 'Entrenamientos secuenciales que se desbloquean progresivamente (debes completar uno para desbloquear el siguiente)' %}</span>
                                </li>
                                <li>
                                    <i class="bi bi-skip-forward"></i>
                                    <span>{% trans 'Puedes avanzar al siguiente entrenamiento incluso si fallaste el actual, pero este quedará bloqueado' %}</span>
                                </li>
                                <li>
                                    <i class="bi bi-trophy"></i>
                                    <span>{% trans 'Examen final disponible solo al completar todos los entrenamientos del curso' %}</span>
                                </li>
                                <li>
                                    <i class="bi bi-graph-up"></i>
                                    <span>{% trans 'Debes mantener un promedio mínimo de tus mejores puntajes para acceder al examen final' %}</span>
                                </li>
                                <li>
                                    <i class="bi bi-award"></i>
                                    <span>{% trans 'El examen final tiene su propio puntaje mínimo de aprobación' %}</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="info-card expandable">
                        <div class="info-card-header" data-toggle="collapse" data-target="#training-info">
                            <div class="info-icon bg-gradient-green">
                                <i class="bi bi-journal-text"></i>
                            </div>
                            <div class="info-content">
                                <h3>{% trans 'Entrenamiento' %}</h3>
                                <p>{% trans 'Evaluación con bloques de preguntas' %}</p>
                            </div>
                            <i class="bi bi-chevron-down expand-icon"></i>
                        </div>
                        <div class="info-card-body collapse" id="training-info">
                            <ul class="feature-list">
                                <li>
                                    <i class="bi bi-puzzle"></i>
                                    <span>{% trans 'Múltiples bloques de preguntas temáticas que deben completarse en secuencia' %}</span>
                                </li>
                                <li>
                                    <i class="bi bi-repeat"></i>
                                    <span>{% trans 'Cada entrenamiento tiene un número limitado de intentos (ej: 3 intentos)' %}</span>
                                </li>
                                <li>
                                    <i class="bi bi-percent"></i>
                                    <span>{% trans 'Cada entrenamiento tiene una puntuación mínima (passing score) que debes alcanzar para aprobarlo' %}</span>
                                </li>
                                <li>
                                    <i class="bi bi-trophy-fill"></i>
                                    <span>{% trans 'Se guarda tu mejor puntaje de todos los intentos realizados' %}</span>
                                </li>
                                <li>
                                    <i class="bi bi-clock-history"></i>
                                    <span>{% trans 'También se registra tu último puntaje para ver tu progreso más reciente' %}</span>
                                </li>
                                <li>
                                    <i class="bi bi-file-earmark-check"></i>
                                    <span>{% trans 'Después de completar puedes revisar tus respuestas y ver las correctas' %}</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Status Legend -->
                <div class="status-legend mt-5">
                    <h3 class="mb-4">{% trans 'Estados del Entrenamiento' %}</h3>
                    <div class="status-grid">
                        <div class="status-item" data-status="available">
                            <div class="status-badge bg-info">
                                <i class="bi bi-play-circle-fill"></i>
                            </div>
                            <div class="status-info">
                                <h4>{% trans 'Disponible' %}</h4>
                                <p>{% trans 'Listo para comenzar tu primer intento' %}</p>
                            </div>
                        </div>

                        <div class="status-item" data-status="passed">
                            <div class="status-badge bg-success">
                                <i class="bi bi-check-circle-fill"></i>
                            </div>
                            <div class="status-info">
                                <h4>{% trans 'Aprobado' %}</h4>
                                <p>{% trans 'Has alcanzado el puntaje mínimo. Puedes reintentar para mejorar (opcional)' %}</p>
                            </div>
                        </div>

                        <div class="status-item" data-status="failed">
                            <div class="status-badge bg-danger">
                                <i class="bi bi-x-circle-fill"></i>
                            </div>
                            <div class="status-info">
                                <h4>{% trans 'Fallido' %}</h4>
                                <p>{% trans 'No alcanzaste el puntaje mínimo. Puedes reintentar si tienes intentos disponibles' %}</p>
                            </div>
                        </div>

                        <div class="status-item" data-status="locked">
                            <div class="status-badge bg-secondary">
                                <i class="bi bi-lock-fill"></i>
                            </div>
                            <div class="status-info">
                                <h4>{% trans 'Bloqueado' %}</h4>
                                <p>{% trans 'Debes completar el entrenamiento anterior para desbloquearlo' %}</p>
                            </div>
                        </div>

                        <div class="status-item" data-status="locked-skipped">
                            <div class="status-badge" style="background: linear-gradient(135deg, #6F42C1 0%, #5A32A3 100%);">
                                <i class="bi bi-lock-fill"></i>
                            </div>
                            <div class="status-info">
                                <h4>{% trans 'Bloqueado - Saltado' %}</h4>
                                <p>{% trans 'Avanzaste al siguiente sin aprobar. Quedó bloqueado pero conservas tu mejor puntaje' %}</p>
                            </div>
                        </div>

                        <div class="status-item" data-status="attempts-exhausted">
                            <div class="status-badge" style="background: linear-gradient(135deg, #FD7E14 0%, #E8590C 100%);">
                                <i class="bi bi-ban"></i>
                            </div>
                            <div class="status-info">
                                <h4>{% trans 'Intentos Agotados' %}</h4>
                                <p>{% trans 'Has usado todos los intentos permitidos. Solo puedes ver los resultados' %}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert-box info-box mt-4">
                        <i class="bi bi-info-circle-fill"></i>
                        <div>
                            <strong>{% trans 'Importante sobre los estados:' %}</strong>
                            <ul style="margin-top: 10px; margin-bottom: 0;">
                                <li>{% trans 'Los entrenamientos se desbloquean secuencialmente (uno después del otro)' %}</li>
                                <li>{% trans 'Puedes avanzar al siguiente entrenamiento incluso si fallaste el actual' %}</li>
                                <li>{% trans 'Si avanzas sin aprobar, el entrenamiento anterior quedará bloqueado (estado "Locked - Skipped")' %}</li>
                                <li>{% trans 'Tu mejor puntaje siempre se conserva, incluso si el entrenamiento queda bloqueado' %}</li>
                                <li>{% trans 'Cada entrenamiento tiene un número limitado de intentos' %}</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 2: How it Works -->
            <section id="how-it-works" class="content-section">
                <div class="section-header">
                    <h2>{% trans 'Cómo Funciona' %}</h2>
                    <p class="text-muted">{% trans 'Paso a paso para completar un entrenamiento' %}</p>
                </div>

                <div class="timeline">
                    <div class="timeline-item" data-step="1">
                        <div class="timeline-marker">
                            <div class="timeline-number">1</div>
                        </div>
                        <div class="timeline-content">
                            <div class="timeline-card">
                                <div class="timeline-icon bg-gradient-blue">
                                    <i class="bi bi-list-ul"></i>
                                </div>
                                <h4>{% trans 'Selecciona un Curso' %}</h4>
                                <p>{% trans 'Elige el curso que deseas realizar desde la sección de Trainings' %}</p>
                            </div>
                        </div>
                    </div>

                    <div class="timeline-item" data-step="2">
                        <div class="timeline-marker">
                            <div class="timeline-number">2</div>
                        </div>
                        <div class="timeline-content">
                            <div class="timeline-card">
                                <div class="timeline-icon bg-gradient-green">
                                    <i class="bi bi-play-fill"></i>
                                </div>
                                <h4>{% trans 'Comienza el Entrenamiento' %}</h4>
                                <p>{% trans 'Haz clic en "Comenzar" en el entrenamiento disponible' %}</p>
                            </div>
                        </div>
                    </div>

                    <div class="timeline-item" data-step="3">
                        <div class="timeline-marker">
                            <div class="timeline-number">3</div>
                        </div>
                        <div class="timeline-content">
                            <div class="timeline-card">
                                <div class="timeline-icon bg-gradient-purple">
                                    <i class="bi bi-pencil-square"></i>
                                </div>
                                <h4>{% trans 'Responde las Preguntas' %}</h4>
                                <p>{% trans 'Completa cada bloque de preguntas cuidadosamente' %}</p>
                            </div>
                        </div>
                    </div>

                    <div class="timeline-item" data-step="4">
                        <div class="timeline-marker">
                            <div class="timeline-number">4</div>
                        </div>
                        <div class="timeline-content">
                            <div class="timeline-card">
                                <div class="timeline-icon bg-gradient-orange">
                                    <i class="bi bi-bar-chart"></i>
                                </div>
                                <h4>{% trans 'Revisa tus Resultados' %}</h4>
                                <p>{% trans 'Analiza tu desempeño y aprende de los errores' %}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="alert-box info-box mt-5">
                    <i class="bi bi-info-circle"></i>
                    <div>
                        <strong>{% trans 'Sistema de Progresión Flexible:' %}</strong>
                        <p>{% trans 'Puedes avanzar al siguiente entrenamiento incluso si no aprobaste el actual. Esto bloqueará el entrenamiento anterior, pero tu mejor puntaje se conservará para el cálculo del promedio del curso. Si aprobaste, puedes reintentar opcionalmente para mejorar tu puntaje. Si fallaste y avanzas, perderás la oportunidad de reintentar ese entrenamiento.' %}</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Function Examples -->
            <section id="function-examples" class="content-section">
                <div class="section-header">
                    <h2>{% trans 'Ejemplos de Funciones' %}</h2>
                    <p class="text-muted">{% trans 'Visualiza y escucha diferentes tipos de funciones sonificadas' %}</p>
                </div>

                <!-- Basic Functions -->
                <div class="function-category">
                    <div class="category-header">
                        <div class="category-icon bg-gradient-blue">
                            <i class="bi bi-activity"></i>
                        </div>
                        <div>
                            <h3>{% trans 'Funciones Básicas' %}</h3>
                            <p>{% trans 'Formas de onda simples y fundamentales' %}</p>
                        </div>
                    </div>

                    <div class="function-grid">
                        <!-- Sine Wave -->
                        <div class="function-card" data-modal="modal-function-sine" style="cursor: pointer;">
                            <div class="function-image">
                                <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/senoplot.png" alt="Onda Senoidal">
                            </div>
                            <div class="function-info">
                                <h4>{% trans 'Onda Senoidal' %}</h4>
                                <p>{% trans 'Oscilación periódica suave y regular' %}</p>
                                <span class="view-more">{% trans 'Click para ver detalles' %}</span>
                            </div>
                        </div>

                        <!-- Cosine Wave -->
                        <div class="function-card" data-modal="modal-function-cosine" style="cursor: pointer;">
                            <div class="function-image">
                                <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/cosenoplot.png" alt="Onda Cosenoidal">
                            </div>
                            <div class="function-info">
                                <h4>{% trans 'Onda Cosenoidal' %}</h4>
                                <p>{% trans 'Similar a la senoidal pero con fase diferente' %}</p>
                                <span class="view-more">{% trans 'Click para ver detalles' %}</span>
                            </div>
                        </div>

                        <!-- Linear Function -->
                        <div class="function-card" data-modal="modal-function-constant" style="cursor: pointer;">
                            <div class="function-image">
                                <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/fc-constanteplot.png" alt="Función Constante">
                            </div>
                            <div class="function-info">
                                <h4>{% trans 'Función Constante' %}</h4>
                                <p>{% trans 'Valor constante sin variación' %}</p>
                                <span class="view-more">{% trans 'Click para ver detalles' %}</span>
                            </div>
                        </div>

                        <!-- Exponential Function -->
                        <div class="function-card" data-modal="modal-function-decreasing" style="cursor: pointer;">
                            <div class="function-image">
                                <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/decrecienteplot.png" alt="Función Decreciente">
                            </div>
                            <div class="function-info">
                                <h4>{% trans 'Función Decreciente' %}</h4>
                                <p>{% trans 'Decrecimiento gradual' %}</p>
                                <span class="view-more">{% trans 'Click para ver detalles' %}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Functions -->
                <div class="function-category mt-5">
                    <div class="category-header">
                        <div class="category-icon bg-gradient-purple">
                            <i class="bi bi-graph-up-arrow"></i>
                        </div>
                        <div>
                            <h3>{% trans 'Funciones Avanzadas' %}</h3>
                            <p>{% trans 'Combinaciones y formas complejas' %}</p>
                        </div>
                    </div>

                    <div class="function-grid">
                        <!-- Sum of Sinusoidals -->
                        <div class="function-card" data-modal="modal-function-quadratic" style="cursor: pointer;">
                            <div class="function-image">
                                <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/cuadratica2plot.png" alt="Función Cuadrática">
                            </div>
                            <div class="function-info">
                                <h4>{% trans 'Función Cuadrática' %}</h4>
                                <p>{% trans 'Parábola con forma de U' %}</p>
                                <span class="view-more">{% trans 'Click para ver detalles' %}</span>
                            </div>
                        </div>

                        <!-- Modulated Wave -->
                        <div class="function-card" data-modal="modal-function-quadratic2" style="cursor: pointer;">
                            <div class="function-image">
                                <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/cuadraticaplot.png" alt="Función Cuadrática Invertida">
                            </div>
                            <div class="function-info">
                                <h4>{% trans 'Función Cuadrática Invertida' %}</h4>
                                <p>{% trans 'Parábola invertida' %}</p>
                                <span class="view-more">{% trans 'Click para ver detalles' %}</span>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="alert-box info-box mt-5">
                    <i class="bi bi-headphones"></i>
                    <div>
                        <strong>{% trans 'Consejo:' %}</strong>
                        <p>{% trans 'Usa auriculares para apreciar mejor los detalles de cada función sonificada. Presta atención a las diferencias entre las funciones básicas y las que tienen ruido añadido.' %}</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Question Types -->
            <section id="question-types" class="content-section">
                <div class="section-header">
                    <h2>{% trans 'Tipos de Preguntas' %}</h2>
                    <p class="text-muted">{% trans 'Conoce los formatos de evaluación' %}</p>
                </div>

                <div class="question-types-grid">
                    <div class="question-type-card" data-type="text">
                        <div class="question-type-icon">
                            <i class="bi bi-fonts"></i>
                        </div>
                        <h4>{% trans 'Texto' %}</h4>
                        <p>{% trans 'Preguntas basadas en enunciados escritos' %}</p>
                        <button class="btn-preview" data-modal="modal-text">
                            <span>{% trans 'Ver ejemplo' %}</span>
                            <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>

                    <div class="question-type-card" data-type="image">
                        <div class="question-type-icon">
                            <i class="bi bi-image"></i>
                        </div>
                        <h4>{% trans 'Imagen' %}</h4>
                        <p>{% trans 'Identifica elementos visuales' %}</p>
                        <button class="btn-preview" data-modal="modal-image">
                            <span>{% trans 'Ver ejemplo' %}</span>
                            <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>

                    <div class="question-type-card" data-type="audio">
                        <div class="question-type-icon">
                            <i class="bi bi-volume-up"></i>
                        </div>
                        <h4>{% trans 'Audio' %}</h4>
                        <p>{% trans 'Reconoce sonidos y técnicas auditivas' %}</p>
                        <button class="btn-preview" data-modal="modal-audio">
                            <span>{% trans 'Ver ejemplo' %}</span>
                            <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>

                    <div class="question-type-card" data-type="multimedia">
                        <div class="question-type-icon">
                            <i class="bi bi-collection-play"></i>
                        </div>
                        <h4>{% trans 'Multimedia' %}</h4>
                        <p>{% trans 'Combina imagen y audio' %}</p>
                        <button class="btn-preview" data-modal="modal-multimedia">
                            <span>{% trans 'Ver ejemplo' %}</span>
                            <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Section 5: Tips -->
            <section id="tips" class="content-section">
                <div class="section-header">
                    <h2>{% trans 'Consejos para el Éxito' %}</h2>
                    <p class="text-muted">{% trans 'Maximiza tu aprendizaje' %}</p>
                </div>

                <div class="tips-container">
                    <div class="tip-card" data-tip="1">
                        <div class="tip-icon">
                            <i class="bi bi-headphones"></i>
                        </div>
                        <h4>{% trans 'Usa Auriculares' %}</h4>
                        <p>{% trans 'Mejora la calidad del audio en preguntas sonoras' %}</p>
                    </div>

                    <div class="tip-card" data-tip="2">
                        <div class="tip-icon">
                            <i class="bi bi-clock"></i>
                        </div>
                        <h4>{% trans 'Tómate tu Tiempo' %}</h4>
                        <p>{% trans 'Lee cuidadosamente antes de responder' %}</p>
                    </div>

                    <div class="tip-card" data-tip="3">
                        <div class="tip-icon">
                            <i class="bi bi-eye"></i>
                        </div>
                        <h4>{% trans 'Revisa tus Respuestas' %}</h4>
                        <p>{% trans 'Verifica antes de enviar cada bloque' %}</p>
                    </div>

                    <div class="tip-card" data-tip="4">
                        <div class="tip-icon">
                            <i class="bi bi-lightbulb"></i>
                        </div>
                        <h4>{% trans 'Aprende de los Errores' %}</h4>
                        <p>{% trans 'Revisa las respuestas incorrectas para mejorar' %}</p>
                    </div>
                </div>
            </section>

        </div>

        <!-- CTA Section -->
        <section class="cta-section py-5">
            <div class="container">
                <div class="card border-0 shadow-lg cta-card">
                    <div class="card-body text-center py-5 px-4">
                        <h2 class="display-6 fw-bold text-white mb-3">
                            {% trans '¿Listo para comenzar?' %}
                        </h2>
                        <p class="lead text-white mb-4">
                            {% trans 'Elige un curso y empieza tu aprendizaje hoy' %}
                        </p>
                        <div class="cta-buttons">
                            <a href="{% url 'trainingApp:course_list' %}" class="btn-cta primary">
                                <i class="bi bi-play-circle"></i>
                                {% trans 'Ver Cursos' %}
                            </a>
                            <a href="/" class="btn-cta secondary">
                                <i class="bi bi-house"></i>
                                {% trans 'Volver al Inicio' %}
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>
</div>

<!-- Modals for Question Examples -->
<div class="modal-overlay" id="modal-text">
    <div class="modal-container">
        <button class="modal-close">&times;</button>
        <div class="modal-content">
            <h3>{% trans 'Ejemplo: Pregunta de Texto' %}</h3>
            <div class="example-question">
                <p class="question-text"><strong>{% trans '¿Qué característica tiene una función senoidal sonificada?' %}</strong></p>
                <div class="options-list">
                    <div class="option-item">
                        <input type="radio" name="example1" id="ex1a">
                        <label for="ex1a">{% trans 'Produce un sonido constante sin variaciones' %}</label>
                    </div>
                    <div class="option-item correct">
                        <input type="radio" name="example1" id="ex1b" checked>
                        <label for="ex1b">{% trans 'Genera una oscilación periódica con tono que sube y baja de manera regular' %} <i class="bi bi-check-circle-fill"></i></label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="example1" id="ex1c">
                        <label for="ex1c">{% trans 'Crea un patrón de ruido aleatorio sin estructura' %}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-image">
    <div class="modal-container">
        <button class="modal-close">&times;</button>
        <div class="modal-content">
            <h3>{% trans 'Ejemplo: Pregunta con Imagen' %}</h3>
            <div class="example-question">
                <p class="question-text"><strong>{% trans 'Observa el gráfico. ¿Qué tipo de función se muestra?' %}</strong></p>
                <div class="question-media">
                    <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/cosenoplot.png" alt="{% trans 'Gráfico de función coseno' %}" style="max-width: 100%; height: auto; border-radius: 12px;">
                </div>
                <div class="options-list">
                    <div class="option-item">
                        <input type="radio" name="example2" id="ex2a">
                        <label for="ex2a">{% trans 'Función lineal creciente' %}</label>
                    </div>
                    <div class="option-item correct">
                        <input type="radio" name="example2" id="ex2b" checked>
                        <label for="ex2b">{% trans 'Función coseno' %} <i class="bi bi-check-circle-fill"></i></label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="example2" id="ex2c">
                        <label for="ex2c">{% trans 'Función exponencial decreciente' %}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-audio">
    <div class="modal-container">
        <button class="modal-close">&times;</button>
        <div class="modal-content">
            <h3>{% trans 'Ejemplo: Pregunta con Audio' %}</h3>
            <div class="example-question">
                <p class="question-text"><strong>{% trans 'Escucha el audio. ¿Qué función corresponde a este sonido?' %}</strong></p>
                <div class="question-media">
                    <button class="audio-player">
                        <i class="bi bi-play-fill"></i>
                        {% trans 'Reproducir Audio' %}
                    </button>
                </div>
                <div class="options-list">
                    <div class="option-item">
                        <input type="radio" name="example3" id="ex3a">
                        <label for="ex3a">{% trans 'Función triangular' %}</label>
                    </div>
                    <div class="option-item correct">
                        <input type="radio" name="example3" id="ex3b" checked>
                        <label for="ex3b">{% trans 'Suma de dos senoidales con frecuencias diferentes' %} <i class="bi bi-check-circle-fill"></i></label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="example3" id="ex3c">
                        <label for="ex3c">{% trans 'Función constante' %}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-multimedia">
    <div class="modal-container">
        <button class="modal-close">&times;</button>
        <div class="modal-content">
            <h3>{% trans 'Ejemplo: Pregunta Multimedia' %}</h3>
            <div class="example-question">
                <p class="question-text"><strong>{% trans 'Observa el gráfico y escucha el audio. ¿Qué función se representa?' %}</strong></p>
                <div class="question-media multimedia">
                    <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/senoplot.png" alt="{% trans 'Gráfico de función seno' %}" style="max-width: 45%; height: auto; border-radius: 12px;">
                    <button class="audio-player">
                        <i class="bi bi-play-fill"></i>
                        {% trans 'Audio' %}
                    </button>
                </div>
                <div class="options-list">
                    <div class="option-item">
                        <input type="radio" name="example4" id="ex4a">
                        <label for="ex4a">{% trans 'Función coseno' %}</label>
                    </div>
                    <div class="option-item correct">
                        <input type="radio" name="example4" id="ex4b" checked>
                        <label for="ex4b">{% trans 'Función seno' %} <i class="bi bi-check-circle-fill"></i></label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="example4" id="ex4c">
                        <label for="ex4c">{% trans 'Función constante' %}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modals for Function Examples -->
<div class="modal-overlay" id="modal-function-sine">
    <div class="modal-container">
        <button class="modal-close">&times;</button>
        <div class="modal-content">
            <h3>{% trans 'Onda Senoidal' %}</h3>
            <div class="example-question">
                <div class="question-media">
                    <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/senoplot.png" alt="{% trans 'Gráfico de función seno' %}" style="max-width: 100%; height: auto; border-radius: 12px; margin-bottom: 20px;">
                </div>
                <p class="question-text">{% trans 'La función seno representa una oscilación periódica suave y regular. En la sonificación, genera un tono puro y continuo.' %}</p>
                <div class="question-media" style="margin-top: 20px;">
                    <button class="audio-player" onclick="document.getElementById('audio-sine').play()">
                        <i class="bi bi-play-fill"></i>
                        {% trans 'Reproducir Audio' %}
                    </button>
                    <audio id="audio-sine" src="{{ MEDIA_URL }}trainingApp/sound/tutorial/seno_sound.mp3" controls style="margin-top: 15px; width: 100%;"></audio>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-function-cosine">
    <div class="modal-container">
        <button class="modal-close">&times;</button>
        <div class="modal-content">
            <h3>{% trans 'Onda Cosenoidal' %}</h3>
            <div class="example-question">
                <div class="question-media">
                    <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/cosenoplot.png" alt="{% trans 'Gráfico de función coseno' %}" style="max-width: 100%; height: auto; border-radius: 12px; margin-bottom: 20px;">
                </div>
                <p class="question-text">{% trans 'La función coseno es similar a la senoidal pero con una fase inicial diferente. Produce un tono puro con el mismo periodo pero desfasado.' %}</p>
                <div class="question-media" style="margin-top: 20px;">
                    <button class="audio-player" onclick="document.getElementById('audio-cosine').play()">
                        <i class="bi bi-play-fill"></i>
                        {% trans 'Reproducir Audio' %}
                    </button>
                    <audio id="audio-cosine" src="{{ MEDIA_URL }}trainingApp/sound/tutorial/coseno_sound.mp3" controls style="margin-top: 15px; width: 100%;"></audio>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-function-constant">
    <div class="modal-container">
        <button class="modal-close">&times;</button>
        <div class="modal-content">
            <h3>{% trans 'Función Constante' %}</h3>
            <div class="example-question">
                <div class="question-media">
                    <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/fc-constanteplot.png" alt="{% trans 'Gráfico de función constante' %}" style="max-width: 100%; height: auto; border-radius: 12px; margin-bottom: 20px;">
                </div>
                <p class="question-text">{% trans 'La función constante mantiene un valor fijo en el tiempo. Su sonificación produce un tono continuo sin variación de frecuencia.' %}</p>
                <div class="question-media" style="margin-top: 20px;">
                    <button class="audio-player" onclick="document.getElementById('audio-constant').play()">
                        <i class="bi bi-play-fill"></i>
                        {% trans 'Reproducir Audio' %}
                    </button>
                    <audio id="audio-constant" src="{{ MEDIA_URL }}trainingApp/sound/tutorial/constante.wav" controls style="margin-top: 15px; width: 100%;"></audio>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-function-decreasing">
    <div class="modal-container">
        <button class="modal-close">&times;</button>
        <div class="modal-content">
            <h3>{% trans 'Función Decreciente' %}</h3>
            <div class="example-question">
                <div class="question-media">
                    <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/decrecienteplot.png" alt="{% trans 'Gráfico de función decreciente' %}" style="max-width: 100%; height: auto; border-radius: 12px; margin-bottom: 20px;">
                </div>
                <p class="question-text">{% trans 'La función decreciente muestra una disminución gradual del valor. Su sonificación produce un tono que desciende progresivamente.' %}</p>
                <div class="question-media" style="margin-top: 20px;">
                    <button class="audio-player" onclick="document.getElementById('audio-decreasing').play()">
                        <i class="bi bi-play-fill"></i>
                        {% trans 'Reproducir Audio' %}
                    </button>
                    <audio id="audio-decreasing" src="{{ MEDIA_URL }}trainingApp/sound/tutorial/decreciente_sound.mp3" controls style="margin-top: 15px; width: 100%;"></audio>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-function-quadratic">
    <div class="modal-container">
        <button class="modal-close">&times;</button>
        <div class="modal-content">
            <h3>{% trans 'Función Cuadrática' %}</h3>
            <div class="example-question">
                <div class="question-media">
                    <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/cuadratica2plot.png" alt="{% trans 'Gráfico de función cuadrática' %}" style="max-width: 100%; height: auto; border-radius: 12px; margin-bottom: 20px;">
                </div>
                <p class="question-text">{% trans 'La función cuadrática tiene forma de parábola (U). Su sonificación crea un patrón que acelera en los extremos y desacelera en el centro.' %}</p>
                <div class="question-media" style="margin-top: 20px;">
                    <button class="audio-player" onclick="document.getElementById('audio-quadratic').play()">
                        <i class="bi bi-play-fill"></i>
                        {% trans 'Reproducir Audio' %}
                    </button>
                    <audio id="audio-quadratic" src="{{ MEDIA_URL }}trainingApp/sound/tutorial/cuadratica2_sound.mp3" controls style="margin-top: 15px; width: 100%;"></audio>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-function-quadratic2">
    <div class="modal-container">
        <button class="modal-close">&times;</button>
        <div class="modal-content">
            <h3>{% trans 'Función Cuadrática Invertida' %}</h3>
            <div class="example-question">
                <div class="question-media">
                    <img src="{{ MEDIA_URL }}trainingApp/images/tutorial/cuadraticaplot.png" alt="{% trans 'Gráfico de función cuadrática invertida' %}" style="max-width: 100%; height: auto; border-radius: 12px; margin-bottom: 20px;">
                </div>
                <p class="question-text">{% trans 'La función cuadrática invertida tiene forma de parábola invertida. Su sonificación es el patrón opuesto: desacelera en los extremos y acelera en el centro.' %}</p>
                <div class="question-media" style="margin-top: 20px;">
                    <button class="audio-player" onclick="document.getElementById('audio-quadratic2').play()">
                        <i class="bi bi-play-fill"></i>
                        {% trans 'Reproducir Audio' %}
                    </button>
                    <audio id="audio-quadratic2" src="{{ MEDIA_URL }}trainingApp/sound/tutorial/cuadratica_sound.mp3" controls style="margin-top: 15px; width: 100%;"></audio>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* ============================================
   VARIABLES & RESET
   ============================================ */
:root {
    --primary: #6eb5d4;
    --primary-dark: #5a9fb8;
    --success: #10B981;
    --danger: #EF4444;
    --warning: #F59E0B;
    --info: #6eb5d4;
    --secondary: #6B7280;
    --light: #F9FAFB;
    --dark: #111827;
    
    --gradient-blue: linear-gradient(135deg, #2c3e50 0%, #6eb5d4 100%);
    --gradient-green: linear-gradient(135deg, #10B981 0%, #059669 100%);
    --gradient-purple: linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%);
    --gradient-orange: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
    
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.tutorial-page {
    background: var(--light);
    min-height: 100vh;
}

body.dark-mode .tutorial-page {
    background: #1a1d20;
}

/* ============================================
   HERO SECTION
   ============================================ */
.hero-section {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    padding: 80px 0 60px;
    position: relative;
    overflow: hidden;
}

body.dark-mode .hero-section {
    background: linear-gradient(135deg, #1a1d20 0%, #2b3035 100%);
}

.hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="2" fill="rgba(110,181,212,0.1)"/></svg>');
    opacity: 0.3;
}

.hero-content {
    text-align: center;
    position: relative;
    z-index: 1;
}

.hero-icon {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, #6eb5d4 0%, #88c5db 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 30px;
    box-shadow: 0 8px 16px rgba(110, 181, 212, 0.3);
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.hero-icon i {
    font-size: 48px;
    color: white;
}

.hero-title {
    background: linear-gradient(135deg, #2c3e50 0%, #6eb5d4 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 15px;
    letter-spacing: -0.5px;
    animation: fadeInUp 0.8s ease-out;
}

body.dark-mode .hero-title {
    background: linear-gradient(135deg, #88c5db 0%, #6eb5d4 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.hero-subtitle {
    color: #6c757d;
    font-size: 1.25rem;
    font-weight: 300;
    animation: fadeInUp 1s ease-out;
}

body.dark-mode .hero-subtitle {
    color: #adb5bd;
}

/* ============================================
   QUICK NAVIGATION
   ============================================ */
.quick-nav {
    background: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    position: sticky;
    top: 85px;
    z-index: 99;
    padding: 12px 0;
}

body.dark-mode .quick-nav {
    background: #1F2937;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.nav-pills-wrapper {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    padding: 5px;
    scrollbar-width: thin;
}

.nav-pills-wrapper::-webkit-scrollbar {
    height: 4px;
}

.nav-pills-wrapper::-webkit-scrollbar-thumb {
    background: var(--secondary);
    border-radius: 4px;
}

.nav-pill {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    background: transparent;
    border: 1.5px solid #E5E7EB;
    border-radius: 50px;
    color: var(--secondary);
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: var(--transition);
    white-space: nowrap;
    flex-shrink: 0;
}

body.dark-mode .nav-pill {
    border-color: #374151;
    color: #9CA3AF;
}

.nav-pill:hover {
    background: #F3F4F6;
    border-color: var(--primary);
    color: var(--primary);
    transform: translateY(-2px);
}

body.dark-mode .nav-pill:hover {
    background: #374151;
    color: #6eb5d4;
}

.nav-pill.active {
    background: #6eb5d4;
    border-color: #6eb5d4;
    color: white;
    box-shadow: var(--shadow-md);
}

body.dark-mode .nav-pill.active {
    background: #6eb5d4;
    border-color: #6eb5d4;
    color: white;
}

.nav-pill i {
    font-size: 16px;
}

/* ============================================
   CONTENT SECTIONS
   ============================================ */
.content-container {
    padding: 60px 20px;
    max-width: 1200px;
}

.content-section {
    display: none;
    animation: fadeInUp 0.5s ease;
}

.content-section.active {
    display: block;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.section-header {
    text-align: center;
    margin-bottom: 50px;
}

.section-header h2 {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--dark);
    margin-bottom: 10px;
}

body.dark-mode .section-header h2 {
    color: #ffffff;
}

.section-header .text-muted {
    font-size: 1.125rem;
    color: var(--secondary);
}

body.dark-mode .section-header .text-muted {
    color: #adb5bd !important;
}

/* ============================================
   INFO GRID (Overview Section)
   ============================================ */
.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
}

.info-card {
    background: white;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    transition: var(--transition);
}

body.dark-mode .info-card {
    background: #2b3035;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.info-card:hover {
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    transform: translateY(-5px);
}

body.dark-mode .info-card:hover {
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
}

.info-card-header {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 30px;
    cursor: pointer;
    position: relative;
}

.info-icon {
    width: 70px;
    height: 70px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.info-icon i {
    font-size: 32px;
    color: white;
}

.bg-gradient-blue {
    background: var(--gradient-blue);
}

.bg-gradient-green {
    background: var(--gradient-green);
}

.bg-gradient-purple {
    background: var(--gradient-purple);
}

.bg-gradient-orange {
    background: var(--gradient-orange);
}

.info-content {
    flex: 1;
}

.info-content h3 {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 5px;
}

body.dark-mode .info-content h3 {
    color: #ffffff;
}

.info-content p {
    color: var(--secondary);
    margin: 0;
}

body.dark-mode .info-content p {
    color: #adb5bd;
}

.expand-icon {
    font-size: 24px;
    color: var(--secondary);
    transition: var(--transition);
}

.info-card-header:not(.collapsed) .expand-icon {
    transform: rotate(180deg);
}

.info-card-body {
    padding: 0 30px 30px;
}

.feature-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.feature-list li {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 0;
    border-bottom: 1px solid #F3F4F6;
}

.feature-list li:last-child {
    border-bottom: none;
}

.feature-list i {
    font-size: 20px;
    color: var(--primary);
    margin-top: 2px;
    flex-shrink: 0;
}

.feature-list span {
    color: var(--dark);
    line-height: 1.6;
}

body.dark-mode .feature-list span {
    color: #e9ecef;
}

body.dark-mode .feature-list li {
    border-bottom-color: #374151;
}

/* ============================================
   STATUS LEGEND
   ============================================ */
.status-legend h3 {
    font-size: 1.75rem;
    font-weight: 600;
    color: var(--dark);
    text-align: center;
}

.status-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}

@media (max-width: 992px) {
    .status-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 576px) {
    .status-grid {
        grid-template-columns: 1fr;
    }
}

.status-item {
    background: white;
    padding: 25px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    transition: var(--transition);
    cursor: pointer;
}

body.dark-mode .status-item {
    background: #2b3035;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.status-item:hover {
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
    transform: translateY(-3px);
}

body.dark-mode .status-item:hover {
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
}

.status-badge {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.status-badge i {
    font-size: 28px;
    color: white;
}

.bg-primary {
    background: var(--primary);
}

.bg-success {
    background: var(--success);
}

.bg-danger {
    background: var(--danger);
}

.bg-secondary {
    background: var(--secondary);
}

.status-info h4 {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 5px;
}

body.dark-mode .status-info h4 {
    color: #ffffff;
}

.status-info p {
    font-size: 0.875rem;
    color: var(--secondary);
    margin: 0;
}

body.dark-mode .status-info p {
    color: #adb5bd;
}

/* ============================================
   TIMELINE (How it Works)
   ============================================ */
.timeline {
    position: relative;
    max-width: 800px;
    margin: 0 auto;
}

.timeline::before {
    content: '';
    position: absolute;
    left: 30px;
    top: 0;
    bottom: 0;
    width: 3px;
    background: linear-gradient(to bottom, var(--primary), var(--success));
}

.timeline-item {
    position: relative;
    padding-left: 90px;
    margin-bottom: 50px;
    opacity: 0;
    animation: slideInLeft 0.6s ease forwards;
}

.timeline-item:nth-child(1) { animation-delay: 0.1s; }
.timeline-item:nth-child(2) { animation-delay: 0.2s; }
.timeline-item:nth-child(3) { animation-delay: 0.3s; }
.timeline-item:nth-child(4) { animation-delay: 0.4s; }

@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateX(-30px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.timeline-marker {
    position: absolute;
    left: 0;
}

.timeline-number {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: white;
    border: 4px solid var(--primary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary);
    box-shadow: var(--shadow-md);
}

.timeline-card {
    background: white;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    display: flex;
    align-items: flex-start;
    gap: 20px;
    transition: var(--transition);
}

body.dark-mode .timeline-card {
    background: #2b3035;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.timeline-card:hover {
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    transform: translateX(10px);
}

body.dark-mode .timeline-card:hover {
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
}

.timeline-icon {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.timeline-icon i {
    font-size: 28px;
    color: white;
}

.timeline-card h4 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 8px;
}

body.dark-mode .timeline-card h4 {
    color: #ffffff;
}

.timeline-card p {
    color: var(--secondary);
    margin: 0;
    line-height: 1.6;
}

body.dark-mode .timeline-card p {
    color: #adb5bd;
}

.alert-box {
    background: white;
    padding: 25px;
    border-radius: 12px;
    border-left: 4px solid #6eb5d4;
    display: flex;
    align-items: flex-start;
    gap: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

body.dark-mode .alert-box {
    background: #2b3035;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    border-left-color: #6eb5d4;
}

.alert-box i {
    font-size: 24px;
    color: #6eb5d4;
    flex-shrink: 0;
    margin-top: 2px;
}

.alert-box strong {
    color: var(--dark);
    display: block;
    margin-bottom: 5px;
}

body.dark-mode .alert-box strong {
    color: #ffffff;
}

.alert-box p,
.alert-box ul {
    color: var(--secondary);
    margin: 0;
    line-height: 1.6;
}

body.dark-mode .alert-box p,
body.dark-mode .alert-box ul {
    color: #adb5bd;
}

.alert-box ul li {
    color: var(--secondary);
}

body.dark-mode .alert-box ul li {
    color: #adb5bd;
}

/* ============================================
   FUNCTION EXAMPLES SECTION (NEW)
   ============================================ */
.function-category {
    margin-bottom: 60px;
}

.category-header {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 30px;
    padding: 25px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

body.dark-mode .category-header {
    background: #2b3035;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.category-icon {
    width: 70px;
    height: 70px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.category-icon i {
    font-size: 36px;
    color: white;
}

.category-header h3 {
    font-size: 1.75rem;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 5px;
}

body.dark-mode .category-header h3 {
    color: #ffffff;
}

.category-header p {
    color: var(--secondary);
    margin: 0;
}

body.dark-mode .category-header p {
    color: #adb5bd;
}

.function-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 25px;
}

.function-card {
    background: white;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    transition: var(--transition);
}

body.dark-mode .function-card {
    background: #2b3035;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.function-card:hover {
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    transform: translateY(-5px);
}

body.dark-mode .function-card:hover {
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
}

.function-image {
    width: 100%;
    height: 200px;
    overflow: hidden;
    background: #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: center;
}

body.dark-mode .function-image {
    background: #1a1d20;
}

.function-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.function-info {
    padding: 20px;
}

.function-info h4 {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 8px;
}

body.dark-mode .function-info h4 {
    color: #ffffff;
}

.function-info p {
    font-size: 0.875rem;
    color: var(--secondary);
    margin-bottom: 15px;
}

body.dark-mode .function-info p {
    color: #adb5bd;
}

.audio-controls {
    display: flex;
    align-items: center;
    gap: 10px;
}

.btn-audio-play {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: linear-gradient(135deg, #6eb5d4 0%, #5a9fb8 100%);
    border: none;
    border-radius: 50px;
    color: white;
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: var(--transition);
    width: 100%;
    justify-content: center;
}

.btn-audio-play:hover {
    background: linear-gradient(135deg, #5a9fb8 0%, #4a8fa0 100%);
    transform: scale(1.05);
}

.btn-audio-play.playing {
    background: linear-gradient(135deg, #10B981 0%, #059669 100%);
}

.btn-audio-play.playing i::before {
    content: "\f28c"; /* pause icon */
}

.btn-audio-play i {
    font-size: 16px;
}

/* ============================================
   QUESTION TYPES GRID
   ============================================ */
.question-types-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 30px;
}

.question-type-card {
    background: white;
    padding: 40px 30px;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    text-align: center;
    transition: var(--transition);
    cursor: pointer;
}

body.dark-mode .question-type-card {
    background: #2b3035;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.question-type-card:hover {
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    transform: translateY(-10px);
}

body.dark-mode .question-type-card:hover {
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
}

.question-type-icon {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, #6eb5d4 0%, #5a9fb8 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    transition: var(--transition);
}

.question-type-card:hover .question-type-icon {
    transform: scale(1.1) rotate(5deg);
}

.question-type-icon i {
    font-size: 36px;
    color: white;
}

.question-type-card h4 {
    font-size: 1.375rem;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 10px;
}

body.dark-mode .question-type-card h4 {
    color: #ffffff;
}

.question-type-card p {
    color: var(--secondary);
    margin-bottom: 20px;
}

body.dark-mode .question-type-card p {
    color: #adb5bd;
}

.btn-preview {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: transparent;
    border: 2px solid #6eb5d4;
    border-radius: 50px;
    color: #6eb5d4;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
}

.btn-preview:hover {
    background: #6eb5d4;
    color: white;
    transform: translateX(5px);
}

.btn-preview i {
    transition: var(--transition);
}

.btn-preview:hover i {
    transform: translateX(3px);
}

/* ============================================
   TIPS CONTAINER
   ============================================ */
.tips-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
}

.tip-card {
    background: white;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    text-align: center;
    transition: var(--transition);
    opacity: 0;
    animation: fadeInScale 0.6s ease forwards;
}

body.dark-mode .tip-card {
    background: #2b3035;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.tip-card:nth-child(1) { animation-delay: 0.1s; }
.tip-card:nth-child(2) { animation-delay: 0.2s; }
.tip-card:nth-child(3) { animation-delay: 0.3s; }
.tip-card:nth-child(4) { animation-delay: 0.4s; }

@keyframes fadeInScale {
    from {
        opacity: 0;
        transform: scale(0.9);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.tip-card:hover {
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    transform: translateY(-5px);
}

body.dark-mode .tip-card:hover {
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
}

.tip-icon {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: linear-gradient(135deg, #FEF3C7, #FDE68A);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
}

.tip-icon i {
    font-size: 32px;
    color: #F59E0B;
}

.tip-card h4 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 10px;
}

body.dark-mode .tip-card h4 {
    color: #ffffff;
}

.tip-card p {
    color: var(--secondary);
    margin: 0;
    line-height: 1.6;
}

body.dark-mode .tip-card p {
    color: #adb5bd;
}

/* ============================================
   CTA SECTION
   ============================================ */
.cta-section {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    padding: 50px 0;
}

body.dark-mode .cta-section {
    background: linear-gradient(135deg, #2b3035 0%, #1a1d20 100%);
}

.cta-card {
    background-color: #6eb5d4 !important;
}

body.dark-mode .cta-card {
    background-color: #6eb5d4 !important;
}

.cta-buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
}

.btn-cta {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 16px 32px;
    border-radius: 8px;
    font-size: 1.125rem;
    font-weight: 600;
    text-decoration: none;
    transition: var(--transition);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.btn-cta.primary {
    background: white;
    color: #6eb5d4;
    border: none;
}

.btn-cta.primary:hover {
    background: #f8f9fa;
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    color: #5a9fb8;
}

.btn-cta.secondary {
    background: transparent;
    color: white;
    border: 2px solid white;
}

body.dark-mode .btn-cta.secondary {
    background: transparent;
    color: white;
    border-color: white;
}

.btn-cta.secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-2px);
    color: white;
}

body.dark-mode .btn-cta.secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
}

/* ============================================
   MODALS
   ============================================ */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: var(--transition);
}

.modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.modal-container {
    background: white;
    border-radius: 20px;
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    transform: scale(0.9);
    transition: var(--transition);
}

body.dark-mode .modal-container {
    background: #2b3035;
}

.modal-overlay.active .modal-container {
    transform: scale(1);
}

.modal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #F3F4F6;
    border: none;
    font-size: 24px;
    color: var(--dark);
    cursor: pointer;
    transition: var(--transition);
    z-index: 1;
}

.modal-close:hover {
    background: var(--danger);
    color: white;
    transform: rotate(90deg);
}

.modal-content {
    padding: 40px;
}

.modal-content h3 {
    font-size: 1.75rem;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 30px;
    text-align: center;
}

body.dark-mode .modal-content h3 {
    color: #ffffff;
}

.example-question {
    background: #F9FAFB;
    padding: 30px;
    border-radius: 12px;
}

body.dark-mode .example-question {
    background: #1a1d20;
}

.question-text {
    font-size: 1.125rem;
    color: var(--dark);
    margin-bottom: 25px;
}

body.dark-mode .question-text {
    color: #ffffff;
}

.question-media {
    margin: 25px 0;
    text-align: center;
}

.media-placeholder {
    background: var(--secondary);
    color: white;
    padding: 60px 30px;
    border-radius: 12px;
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

.media-placeholder i {
    font-size: 64px;
}

.audio-player {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 15px 30px;
    background: #6eb5d4;
    color: white;
    border: none;
    border-radius: 50px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
}

.audio-player:hover {
    background: #5a9fb8;
    transform: scale(1.05);
}

.question-media.multimedia {
    display: flex;
    gap: 20px;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
}

.options-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.option-item {
    background: white;
    padding: 15px 20px;
    border-radius: 12px;
    border: 2px solid #E5E7EB;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    transition: var(--transition);
}

body.dark-mode .option-item {
    background: #2b3035;
    border-color: #374151;
}

.option-item:hover {
    border-color: #6eb5d4;
    background: #F3F4F6;
}

body.dark-mode .option-item:hover {
    border-color: #6eb5d4;
    background: #374151;
}

.option-item.correct {
    border-color: var(--success);
    background: #ECFDF5;
}

.option-item input[type="radio"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
}

.option-item label {
    flex: 1;
    cursor: pointer;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.option-item.correct label {
    color: var(--success);
    font-weight: 600;
}

.option-item.correct i {
    color: var(--success);
    font-size: 20px;
}

/* ============================================
   RESPONSIVE
   ============================================ */
@media (max-width: 768px) {
    .hero-title {
        font-size: 2rem;
    }
    
    .hero-subtitle {
        font-size: 1rem;
    }
    
    .section-header h2 {
        font-size: 1.75rem;
    }
    
    .info-grid,
    .function-grid,
    .question-types-grid,
    .tips-container {
        grid-template-columns: 1fr;
    }
    
    .timeline::before {
        left: 20px;
    }
    
    .timeline-item {
        padding-left: 70px;
    }
    
    .timeline-number {
        width: 50px;
        height: 50px;
        font-size: 1.25rem;
    }
    
    .cta-section h2 {
        font-size: 1.75rem;
    }
    
    .cta-buttons {
        flex-direction: column;
    }
    
    .btn-cta {
        width: 100%;
        justify-content: center;
    }
    
    .modal-content {
        padding: 30px 20px;
    }
    
    .category-header {
        flex-direction: column;
        text-align: center;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // ============================================
    // NAVIGATION PILLS
    // ============================================
    const navPills = document.querySelectorAll('.nav-pill');
    const contentSections = document.querySelectorAll('.content-section');
    
    navPills.forEach(pill => {
        pill.addEventListener('click', function() {
            const targetSection = this.getAttribute('data-section');
            
            // Update active pill
            navPills.forEach(p => p.classList.remove('active'));
            this.classList.add('active');
            
            // Update active section
            contentSections.forEach(section => {
                section.classList.remove('active');
            });
            
            const targetElement = document.getElementById(targetSection);
            if (targetElement) {
                targetElement.classList.add('active');
                
                // Smooth scroll to section
                targetElement.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        });
    });
    
    // ============================================
    // EXPANDABLE INFO CARDS
    // ============================================
    const infoCardHeaders = document.querySelectorAll('.info-card-header');
    
    infoCardHeaders.forEach(header => {
        header.addEventListener('click', function() {
            const targetId = this.getAttribute('data-target');
            const targetBody = document.querySelector(targetId);
            
            if (targetBody) {
                // Toggle collapse
                if (targetBody.classList.contains('show')) {
                    targetBody.classList.remove('show');
                    this.classList.add('collapsed');
                } else {
                    targetBody.classList.add('show');
                    this.classList.remove('collapsed');
                }
            }
        });
    });
    
    // ============================================
    // AUDIO PLAYER FUNCTIONALITY
    // ============================================
    const audioButtons = document.querySelectorAll('.btn-audio-play');
    let currentlyPlayingAudio = null;
    let currentlyPlayingButton = null;
    
    audioButtons.forEach(button => {
        button.addEventListener('click', function() {
            const audioId = this.getAttribute('data-audio');
            const audio = document.getElementById('audio-' + audioId);
            
            if (!audio) {
                console.warn('Audio element not found for:', audioId);
                return;
            }
            
            // If another audio is playing, stop it
            if (currentlyPlayingAudio && currentlyPlayingAudio !== audio) {
                currentlyPlayingAudio.pause();
                currentlyPlayingAudio.currentTime = 0;
                if (currentlyPlayingButton) {
                    currentlyPlayingButton.classList.remove('playing');
                    currentlyPlayingButton.querySelector('span').textContent = 
                        currentlyPlayingButton.querySelector('span').getAttribute('data-original-text') || 'Reproducir';
                }
            }
            
            // Toggle play/pause
            if (audio.paused) {
                audio.play();
                this.classList.add('playing');
                if (!this.querySelector('span').getAttribute('data-original-text')) {
                    this.querySelector('span').setAttribute('data-original-text', this.querySelector('span').textContent);
                }
                this.querySelector('span').textContent = 'Pausar';
                currentlyPlayingAudio = audio;
                currentlyPlayingButton = this;
            } else {
                audio.pause();
                this.classList.remove('playing');
                this.querySelector('span').textContent = this.querySelector('span').getAttribute('data-original-text') || 'Reproducir';
            }
            
            // Reset button when audio ends
            audio.addEventListener('ended', function() {
                button.classList.remove('playing');
                button.querySelector('span').textContent = button.querySelector('span').getAttribute('data-original-text') || 'Reproducir';
                currentlyPlayingAudio = null;
                currentlyPlayingButton = null;
            });
        });
    });
    
    // ============================================
    // STATUS ITEM ANIMATIONS
    // ============================================
    const statusItems = document.querySelectorAll('.status-item');
    
    const observerOptions = {
        threshold: 0.2,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const statusObserver = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animation = 'fadeInUp 0.6s ease forwards';
            }
        });
    }, observerOptions);
    
    statusItems.forEach(item => {
        statusObserver.observe(item);
    });
    
    // ============================================
    // MODAL FUNCTIONALITY
    // ============================================
    const modalTriggers = document.querySelectorAll('[data-modal]');
    const modals = document.querySelectorAll('.modal-overlay');
    const modalCloses = document.querySelectorAll('.modal-close');
    
    // Open modal
    modalTriggers.forEach(trigger => {
        trigger.addEventListener('click', function() {
            const modalId = this.getAttribute('data-modal');
            const modal = document.getElementById(modalId);
            
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        });
    });
    
    // Close modal
    modalCloses.forEach(closeBtn => {
        closeBtn.addEventListener('click', function() {
            const modal = this.closest('.modal-overlay');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
    });
    
    // Close modal on overlay click
    modals.forEach(modal => {
        modal.addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
    });
    
    // Close modal on ESC key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            const activeModal = document.querySelector('.modal-overlay.active');
            if (activeModal) {
                activeModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }
    });
    
    // ============================================
    // QUESTION TYPE CARDS HOVER EFFECT
    // ============================================
    const questionCards = document.querySelectorAll('.question-type-card');
    
    questionCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            const icon = this.querySelector('.question-type-icon');
            icon.style.transform = 'scale(1.1) rotate(5deg)';
        });
        
        card.addEventListener('mouseleave', function() {
            const icon = this.querySelector('.question-type-icon');
            icon.style.transform = 'scale(1) rotate(0deg)';
        });
    });
    
    // ============================================
    // TIP CARDS STAGGER ANIMATION
    // ============================================
    const tipCards = document.querySelectorAll('.tip-card');
    
    const tipObserver = new IntersectionObserver(function(entries) {
        entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
                setTimeout(() => {
                    entry.target.style.animation = 'fadeInScale 0.6s ease forwards';
                }, index * 100);
            }
        });
    }, observerOptions);
    
    tipCards.forEach(card => {
        tipObserver.observe(card);
    });
    
    // ============================================
    // SMOOTH SCROLL FOR ALL INTERNAL LINKS
    // ============================================
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
    
    // ============================================
    // PARALLAX EFFECT FOR HERO
    // ============================================
    window.addEventListener('scroll', function() {
        const scrolled = window.pageYOffset;
        const heroSection = document.querySelector('.hero-section');
        
        if (heroSection && scrolled < 500) {
            heroSection.style.transform = `translateY(${scrolled * 0.5}px)`;
            heroSection.style.opacity = 1 - (scrolled / 500);
        }
    });
    
});
</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
{% endblock %}